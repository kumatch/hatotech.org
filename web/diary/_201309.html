<!DOCTYPE html><html><head><title>hatotech</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="hatotech.org"><meta name="author" content="kumatch"><link rel="shortcut icon" href="/assets/ico/favicon.ico"><link href="/assets/css/imports.css" rel="stylesheet"><link href="/assets/css/hatotech.css" rel="stylesheet"></head><body><!-- navi--><div class="navbar navbar-fixed-top nav-hatotech"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/"><i class="icon-home"></i>Home</a></li><li><a href="/diary"><i class="icon-pencil"></i>Diary</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle"><i class="icon-share"></i>Links &nbsp;<b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://twitter.com/kumatch" target="_blank"><i class="icon-twitter"></i>Twitter</a></li><li><a href="https://github.com/kumatch" target="_blank"><i class="icon-github"></i>Github</a></li><li><a href="http://kumatchs.blogspot.jp/" target="_blank"><i class="icon-bold"></i>Blogger</a></li></ul></li></ul></div></div></div><div id="diary-header"><div class="container"><h2>Diary 2013-09</h2></div></div><div class="body-content"><div class="container"><div class="row"><div class="col-md-10"><%= before_after_link %><div id="d_2013-09-30" class="diary-frame"><h4>2013-09-30</h4><div><p>どうやら月別の日記ページが Google のインデックス対象になっていないようだ。<br/>月毎および前後月ページへのリンクは AngularJS で動的生成しているのだけども、恐らくそれが原因なんだと思う。<br/>Google のページ評価は JavaScript を含んだ動的生成結果を基にするという話だったはずなんだけども。<br/>それともリンクの辿り先の決定だけはそれの対象外なんだろうか。</p>

<p>仕方が無いので、Grunt でのページ生成時に全部解決できるようにやり直そう。<br/>せっかくなのでコードそのものも少し見直す予定。</p></div></div><div id="d_2013-09-27" class="diary-frame"><h4>2013-09-27</h4><div><p>以前から計画を立てて少しずつ進めてきていた、<br/>Node.js 用の Dependency injection 可能なサービスコンテナモジュールの <a href="https://github.com/kumatch/paranoic">paranoic</a> の作り直しがようやく完了した。<br/>相変わらず未ドキュメントのままだけども、<a href="https://github.com/kumatch/paranoic/blob/master/test/json.test.js">JSON test</a> と<a href="https://github.com/kumatch/paranoic/blob/master/test/samples/configuration.json">実際の設定 JSON ファイル</a>あたりを見ると大凡の Feature は分かりそう。</p>

<p>初リリースのものからメソッドレベルでずいぶんと違うものになってしまったけども、以前のものが駄目な仕様だったのでしょうがない。<br/>実際のところ Github / NPM 上で公開はしているものの公では全く告知していないので、自分以外に使ってる人はまずいなかっただろう。</p>

<p>自分で用意したモジュールとそこから生成されるインスタンスの依存関係が設定で書けるのは便利ではあるけども、<br/>言語仕様上そのインスタンスが何であるか (type hint) が分からないので、依存注入やインスタンス生成時の嬉しさがイマイチ欠ける気がする。<br/>もちろんテスト時の Mocking には明らかに都合が良くなるので、使う人の好みレベルの代物でいいと思う。</p></div></div><div id="d_2013-09-25" class="diary-frame"><h4>2013-09-25</h4><div><p>Node で循環参照している変数の中身を覗くと、<br/>[ Circular ] という形で循環していることが表示されることを初めて知った。<br/>console.log だけでなく util.inspect でもそのように示される。<br/>Circular 自体は定義されているものではないようなので、<br/>inspect で覗いた結果の文字列を評価して再度変数化しようとしてもエラーになってしまう。</p>

<p>もう少し何とかすれば、対象の変数内で循環参照している旨をコード上で知ることができるかもしれない。</p></div></div><div id="d_2013-09-24" class="diary-frame"><h4>2013-09-24</h4><div><p><a href="https://github.com/kumatch/php-offsettimezone">OffsetTimeZone</a> という PHP モジュールを書きました。</p>

<p>DateTimeZone オブジェクトを作る際はタイムゾーンの名称 (ex. Asia/Tokyo) などを指定しますが、<br/>このモジュールでは UTC からの Offset 値（秒数）を指定して DateTimeZone オブジェクトを作ります。<br/>当然ながら同一の Offset に対して複数のタイムゾーンが存在するので、ここで作られる DateTimeZone は「そのうちのどれか」です。<br/>DateTime オブジェクトと共に使って、表示する日時をタイムゾーンにあわせて宜しくするために利用します。</p></div></div><div id="d_2013-09-23" class="diary-frame"><h4>2013-09-23</h4><div><p><a href="https://github.com/kumatch/nestraight">nestraight</a> という Node モジュールを書きました。<br/>Object / Array の深い階層にある要素に対して、要素名／index をドットで繋いだ文字列で指定して<br/>値の参照や設定が行えるものです。<br/>同じような処理が今書いている異なるいくつかのモジュールで必要になったので抽出した次第です。</p></div></div><div id="d_2013-09-21" class="diary-frame"><h4>2013-09-21</h4><div><p>実家に帰ってみると、飼っている犬が<br/>「玩具として使っていた動物ぬいぐるみの耳を噛みちぎってしまった事に言及されると、ゲージの中に入っていって反省する」<br/>という芸を覚えていた。（別に教えていない）<br/>どんなにはしゃいでいる状態だったとしても、ちぎれた耳を見せると突然くるっと向きを変えてゲージに向かって歩き出し、<br/>悲しい顔をしながらしょんぼり姿で中からこちらを覗くのだ。<br/>何度かやってもずっとそう振る舞うので、本当に悲しみと反省を覚えているみたい。可愛い。</p></div></div><div id="d_2013-09-19" class="diary-frame"><h4>2013-09-19</h4><div><p>季節の変わり目だしどんどん涼しくなっていくのにまた体調を崩してしまわないように<br/>少しサプリメントを入れていくことにした。ドラッグストアだととってもお安い。<br/>あとはコードを書いて Diablo3 で少し遊んで今日はおしまい。</p>

<p>明日は夕方くらいから実家へ行って泊まって、その次の日に朝から墓参りへいく予定。</p></div></div><div id="d_2013-09-18" class="diary-frame"><h4>2013-09-18</h4><div><p>元気にプログラムを書けるというのはとっても楽しい。<br/>ちょこちょこっとコードを書いて、一段落つくところまで進めて、一息ついてゲームで遊ぶというのが<br/>最近の黄金サイクルで、これは体調が良くないとできないということがこの前の発熱のときにわかった。</p>

<p>昨日に Diablo3 を久々に再開してみたところ、今日になってオークションが閉鎖される旨がアナウンスされた。<br/>で、一体なにをすればいいのかは良くわかっていない。そもそもゲーム内のお金が全然ない。</p></div></div><div id="d_2013-09-16" class="diary-frame"><h4>2013-09-16</h4><div><p>電車に乗って出かける（元々予定していた用事なので行くしか無いんだけども）事が問題ないくらいまで復活してた。<br/>入った喫茶店のタバコの煙だけは NG だったけども。これなら明日から普通に過ごせそう。</p>

<p>使ってる OSX 上の Apache を動かす必要があって、権限周りの問題であれこれ困ってしまったので、<br/>自分のログインユーザで Apache を動くよう権限を書き換えて済ませてしまった。<br/>自分しか使わない Mac だし公開サーバじゃないし別にいいよねと言い訳しつつ、<br/>実際それが最も都合よかったんだし、最近はそんなのに全然こだわらずにとっとと済ませるようにしてる。</p></div></div><div id="d_2013-09-15" class="diary-frame"><h4>2013-09-15</h4><div><p>ようやく体調が戻った。<br/>熱があっさり下がったと思いきやそれは点滴を入れたことによる影響が強かったらしく、<br/>次の日にはあっさり 38 ℃まで戻ってしまっていた。<br/>医者は風邪の可能性を示唆していたが、喉や鼻には一切そういった症状が現れず、<br/>またいつまで経っても熱が下がらずに、頭痛と怠さと共に過ごすしかない毎日。<br/>ただひたすらに決まった時間に薬を飲んで後は寝るしか出来る事がないという数日だった。</p>

<p>液晶画面を見ることもままならないので当然コードは書けず、<br/>少しでも頭を働かそうとするとすぐ頭が痛くなるので、本当に何もできなかった。<br/>必要なかった出費まで出たし、何だか発汗のコントロールまで下手になってる気がする。<br/>恐らく今年を振り返ったときには、きっとこの週がワースト週間となるに違いない。</p>

<p>今日はリハビリレベルなのでぼーっとニュースを振り返っている。</p></div></div><div id="d_2013-09-11" class="diary-frame"><h4>2013-09-11</h4><div><p>昼前に熱を計ったところ一向に下がっている感じがしないので病院へ行く。<br/>点滴をいれてもらって薬を貰った。<br/>病院にいく直前に自宅でトイレに行ってしまったおかげで検尿ができず、<br/>夕方にもう一度いくことになってしまった。<br/>検査のために明日の朝にもまた行く必要があるようだ。<br/>貰った薬を飲むと一気に熱が下がってビビる。</p></div></div><div id="d_2013-09-10" class="diary-frame"><h4>2013-09-10</h4><div><p>39.5℃まで熱があがった。<br/>風邪のような症状はなくて、ただただ悪寒と体が痛い。</p></div></div><div id="d_2013-09-09" class="diary-frame"><h4>2013-09-09</h4><div><p><a href="https://github.com/kumatch/breath">breath</a> を 0.1 として上げました。<br/>自分で使いたいので作った代物なので、色々と叩いてみようと思います。</p>

<p>夜の Skype では、先日 PS3 で出たジョジョ格闘ゲームを買った友人が<br/>買おうよ対戦しようよと頑張って勧誘してきた。<br/>他の格闘ゲームにも詳しい彼が、<br/>ジャンプが１フレームで発生するのでバッタゲーだとか<br/>その癖にキャラ毎の調整が雑なのでしゃがまれると飛び攻撃が当たらないとか<br/>必殺コマンドの優先度がおかしくて思った技を出すのに苦労するとか<br/>のけぞり時間が長過ぎるのであり得ない状態からコンボが継続するとか<br/>そんな話をした上で、買って対戦しようというのだ。<br/>彼は一体我々にどんな世界をみせようというのか。</p></div></div><div id="d_2013-09-07" class="diary-frame"><h4>2013-09-07</h4><div><p>昼過ぎに家事を済ますも、昼食後に寝始めてしまって何も進まず。<br/>一回休み。</p></div></div><div id="d_2013-09-06" class="diary-frame"><h4>2013-09-06</h4><div><p>金曜日なのでいつもの唐揚げ弁当の為に弁当屋へいくと、グループ来店していた人たちがカウンターに 10 個前後並んでいた<br/>すべての弁当を買っていこうとしていて、あーこれは暫く追加で作り上がるのを待つことになりそうだなーと思っていたら、<br/>お店の人に「君の唐揚げ弁当はあるで」などと言ってニョキっと下から別の弁当が出てきた。<br/>先に並んでいる人もいたのに良かったのだろうか。<br/>いつもありがとうございます。</p>

<p>Javascript 変数テンプレートモジュールは、ひとまず機能的な部分はクリアした（つもり）ので、<br/>あとはもう少しリファクタリングとパフォーマンス調整をしたら 0.1 を出します。<br/>今は Node 上で動くだけですが、ブラウザでも動くといいな。</p></div></div><div id="d_2013-09-05" class="diary-frame"><h4>2013-09-05</h4><div><p>酒飲んで帰って、今日の残りにいっちょコード書き頑張ってみっかー、<br/>という前に息抜きでお菓子片手に漫画読んでパソコンで動画を見ていたらもう今日が終わっていた。</p></div></div><div id="d_2013-09-04" class="diary-frame"><h4>2013-09-04</h4><div><p>珍しく遊ぶ事なくプログラムコードを書いているところなのに、どうしてこうも早く眠くなってしまうのか。<br/>枕が呼んでいるのでさっさと寝ます。</p>

<p>一応 Diablo3 拡張パックの内容をちょこっと確認してみた。<br/>レベルキャップがあがることでスキルの追加や武器性能も軒並みあがることになるし、<br/>ドロップ仕様や生産部分の変更点もあったりするので、今頑張って資産をためようとしなくても何とかなりそうだ。</p></div></div><div id="d_2013-09-03" class="diary-frame"><h4>2013-09-03</h4><div><p>最近はカルビーのポテトチップス「博多めんたいこ」と、堅あげポテトの「関西だししょうゆ」ばっかり食べてる。<br/>前者は九州地区、後者は関西地区での販売のようだけども、全国展開している店舗だとどこでも買えたりするんだろうか。</p>

<p><a href="https://github.com/kumatch/breath">breath</a> という、javascript の変数 (オブジェクト) を<br/>テンプレートオブジェクトから構築できるものを作ってます。（パッケージ名かえました）<br/>Grunt.js で用意されている設定オブジェクトの変数展開みたいなことができる予定です。</p></div></div><div id="d_2013-09-02" class="diary-frame"><h4>2013-09-02</h4><div><p>今年に入ってからこっそり行われている引っ越し計画というものがあるものの、<br/>良い引っ越し先がさっぱり見つからずにずるずると続いてしまっている。<br/>求めている感じの部屋が見つからなかったり、そうやって部屋を探しているうちに<br/>地域そのものについて気になり始めて別の地域を探し始めたり、また戻ったり。<br/>年内決着はつけたいと思っているのだけども、この調子だと本当に決着が付くのかどうか…。</p>

<p>ところで、カード会社に届けている情報の中の固定電話番号がなくなったので携帯電話に変更しようにも<br/>Web からの登録変更申請が通らないで、問い合わせしろと言われてしまう。<br/>先の引っ越し計画を今年中に行うと、電話と引っ越し先情報をちゃんと一緒に変更できるか、<br/>はたまた電話＋住所の両変更で大変な手続きが必要となってしまうのか。</p></div></div><div id="d_2013-09-01" class="diary-frame"><h4>2013-09-01</h4><div><p><a href="http://underscorejs.org/">Underscore.js</a> から fork した <a href="http://lodash.com/">Lo-Dash</a> ,<br/>たしかパフォーマンスの向上や機能拡張を目的として作られたところから始まっているはずだけども、<br/>最近ではその開発の積極性や動作環境（ブラウザ）による挙動の違いなどの問題を解決したりなどがあって<br/>今旬な javascript ライブラリなどでは Lo-Dash の方を採用しているところもあるんだなと、<br/>grunt のコードを覗いていて思った。<br/>もちろん Underscore.js の方もアップデートは繰り返されていて安心度はあるけども。</p>

<p>ともかく Underscore.js から置き換えてへんなことになるといかんよねと思っていたけども、<br/>ここまでちゃんと叩かれているのならば大丈夫そうだ。</p>

<p>しかしリファレンスの読みやすさは圧倒的に Underscore.js の方がよい…<br/>Lo-Dash は字が大きすぎると思います。</p></div></div><%= before_after_link %></div><div class="col-md-2"><%= monthlies_link %></div></div></div></div><footer><div class="container"></div></footer><script src="/assets/js/imports.min.js"></script></body></html>